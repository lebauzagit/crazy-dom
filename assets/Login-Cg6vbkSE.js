import{d as V,u as H,r as y,c as b,a as p,b as t,e as T,f as x,g as i,h as l,w as m,i as E,t as v,j as a,k as f,v as w,l as G,m as M,o as g,n as N}from"./index-BEdaMpnO.js";import{r as P}from"./ExclamationTriangleIcon-BlEb5Ssm.js";const j={class:"space-y-6"},A={class:"text-center"},B={class:"mt-2 text-sm text-gray-600"},L=["disabled"],q={class:"flex items-center justify-between"},D={class:"flex items-center"},I=["disabled"],R={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},U={class:"flex"},F={class:"ml-3"},O={class:"mt-1 text-sm text-red-700"},z={key:0,class:"mt-2 text-sm text-red-600"},W={class:"mt-1 list-disc list-inside space-y-1"},X=V({__name:"Login",setup(J){const h=N(),c=H(),r=y({email:"",password:"",remember:!1}),s=y(""),{loading:n}=c,_=b(()=>s.value?s.value.includes("Invalid login credentials")||s.value.includes("invalid_credentials")?"The email or password you entered is incorrect.":s.value.includes("Email not confirmed")?"Please check your email and click the confirmation link before signing in.":s.value.includes("Too many requests")?"Too many login attempts. Please wait a moment before trying again.":s.value.includes("OAuth")?"GitHub sign-in failed. Please try again or use email/password.":s.value:""),k=b(()=>s.value.includes("Invalid login credentials")||s.value.includes("invalid_credentials")),C=async()=>{s.value="";try{await c.login(r.value.email,r.value.password),h.push("/dashboard")}catch(d){s.value=d.message||"Login failed"}},S=async()=>{s.value="";try{await c.loginWithGitHub()}catch(d){s.value=d.message||"GitHub sign-in failed"}};return(d,e)=>{const u=E("router-link");return g(),p("div",j,[t("div",A,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold text-gray-900"},"Sign in to your account",-1)),t("p",B,[e[4]||(e[4]=i(" Don't have an account? ")),l(u,{to:"/register",class:"text-primary-600 hover:text-primary-500 font-medium"},{default:m(()=>e[3]||(e[3]=[i(" Sign up ")])),_:1,__:[3]})])]),t("button",{onClick:S,disabled:a(n),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[e[6]||(e[6]=t("svg",{class:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})],-1)),i(" "+v(a(n)?"Signing in...":"Continue with GitHub"),1)],8,L),e[15]||(e[15]=T('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 text-gray-500">Or continue with email</span></div></div>',1)),t("form",{onSubmit:M(C,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email address ",-1)),f(t("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>r.value.email=o),type:"email",required:"",class:"mt-1 input",placeholder:"Enter your email"},null,512),[[w,r.value.email]])]),t("div",null,[e[8]||(e[8]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),f(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.value.password=o),type:"password",required:"",class:"mt-1 input",placeholder:"Enter your password"},null,512),[[w,r.value.password]])]),t("div",q,[t("div",D,[f(t("input",{id:"remember","onUpdate:modelValue":e[2]||(e[2]=o=>r.value.remember=o),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[G,r.value.remember]]),e[9]||(e[9]=t("label",{for:"remember",class:"ml-2 block text-sm text-gray-700"}," Remember me ",-1))]),l(u,{to:"/forgot-password",class:"text-sm text-primary-600 hover:text-primary-500"},{default:m(()=>e[10]||(e[10]=[i(" Forgot your password? ")])),_:1,__:[10]})]),t("button",{type:"submit",disabled:a(n),class:"w-full btn btn-primary py-3 text-base font-medium"},v(a(n)?"Signing in...":"Sign in"),9,I)],32),s.value?(g(),p("div",R,[t("div",U,[l(a(P),{class:"h-5 w-5 text-red-400"}),t("div",F,[e[14]||(e[14]=t("h3",{class:"text-sm font-medium text-red-800"},"Sign In Failed",-1)),t("p",O,v(_.value),1),k.value?(g(),p("div",z,[e[13]||(e[13]=t("p",null,"Please check your email and password, or:",-1)),t("ul",W,[t("li",null,[l(u,{to:"/register",class:"underline hover:no-underline"},{default:m(()=>e[11]||(e[11]=[i(" Create a new account ")])),_:1,__:[11]})]),t("li",null,[l(u,{to:"/forgot-password",class:"underline hover:no-underline"},{default:m(()=>e[12]||(e[12]=[i(" Reset your password ")])),_:1,__:[12]})])])])):x("",!0)])])])):x("",!0)])}}});export{X as default};
